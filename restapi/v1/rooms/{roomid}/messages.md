# Получить список сообщений чат-комнаты
> GET /v1/rooms/{room-id}/messages

## Запрос

Параметр | Обязательный | Описание
-|-|-
token | Да | Уникальный идентификатор сессии
count | Нет | Количество записей (не более 50)
page | Нет | Номер страницы
userId | Нет | Фильтр по полю `userId`
type | Нет | Фильтр по полю `type`

## Ответ

### 200 OK
> Список сообщений чат-комнаты

Поле | Тип | Описание
-|-|-
id | NUMBER | Уникальный ID сообщения
userId | NUMBER | ID пользователя (автора)
type | NUMBER | Тип сообщения
content | STRING | Текст, ссылка или Base64-кодированное содержимое
timestamp | NUMBER | Метка времени
deleted | BOOL | Признак удалённого сообщения

```json
[
    {
        id:        NUMBER,
        userId:    NUMBER,
        type:      NUMBER,
        content:   STRING,
        timestamp: NUMBER
        deleted:   BOOL
    }
]
```

> NOTE: Если сообщение было удалено, то поля `userId`, `type` и `content` не указываются

### 401 Unauthorized
> Не указан токен

Поле | Тип | Описание
-|-|-
error | STRING | Сообщение об ошибке

```json
{
    'error': STRING
}
```

### 403 Forbidden
> Доступ запрещён
> * Указан недействительный токен
> * Нет доступа к закрытой чат-комнате

Поле | Тип | Описание
-|-|-
error | STRING | Сообщение об ошибке

```json
{
    'error': STRING
}
```

### 404 Not Found
> Чат-комната с указанным `{room-id}` не найдена

Поле | Тип | Описание
-|-|-
error | STRING | Сообщение об ошибке

```json
{
    'error': STRING
}
```


---


# Отправка сообщения в чат-комнату
> POST /v1/rooms/{room-id}/messages

## Запрос

Параметр | Обязательный | Описание
-|-|-
token | Да | Уникальный идентификатор сессии
type | Да | Тип сообщения
content | Да | Текст, ссылка или Base64-кодированное содержимое

## Ответ

### 200 OK
> Сообщение отправлено

Поле | Тип | Описание
-|-|-
id | NUMBER | Уникальный ID сообщения
timestamp | NUMBER | Метка времени

```json
{
    id:        NUMBER,
    timestamp: NUMBER
}
```

### 401 Unauthorized
> Не указан токен

Поле | Тип | Описание
-|-|-
error | STRING | Сообщение об ошибке

```json
{
    'error': STRING
}
```

### 403 Forbidden
> Доступ запрещён
> * Указан недействительный токен
> * Нет доступа к закрытой чат-комнате

Поле | Тип | Описание
-|-|-
error | STRING | Сообщение об ошибке

```json
{
    'error': STRING
}
```

### 404 Not Found
> Чат-комната с указанным `{room-id}` не найдена

Поле | Тип | Описание
-|-|-
error | STRING | Сообщение об ошибке

```json
{
    'error': STRING
}
```

### 413 Payload Too Large
> Размер поля `content` слишком большой

Поле | Тип | Описание
-|-|-
error | STRING | Сообщение об ошибке

```json
{
    'error': STRING
}
```

### 415 Unsupported Media Type
> Некоректное значение поля `type`

Поле | Тип | Описание
-|-|-
error | STRING | Сообщение об ошибке

```json
{
    'error': STRING
}
```